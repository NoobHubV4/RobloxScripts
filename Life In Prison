 -- Instances:
local ScreenGui = Instance.new("ScreenGui")
local Main = Instance.new("Frame")
local re2 = Instance.new("TextButton")
local re1 = Instance.new("TextButton")

--Properties:

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

Main.Name = "Main"
Main.Parent = ScreenGui
Main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Main.BorderColor3 = Color3.fromRGB(255, 0, 0)
Main.BorderSizePixel = 2
Main.Position = UDim2.new(0.00485906005, 0, 0.609179854, 0)
Main.Size = UDim2.new(0.17087847, 0, 0.381620556, 0)

re2.Name = "re2"
re2.Parent = Main
re2.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
re2.Position = UDim2.new(0.0705073774, 0, 0.271171719, 0)
re2.Size = UDim2.new(0.858350694, 0, 0.453797489, 0)
re2.Visible = false
re2.Font = Enum.Font.Arcade
re2.Text = "Auto Respawn : On"
re2.TextColor3 = Color3.fromRGB(255, 255, 255)
re2.TextScaled = true
re2.TextSize = 14.000
re2.TextStrokeTransparency = 0.000
re2.TextWrapped = true

re1.Name = "re1"
re1.Parent = Main
re1.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
re1.Position = UDim2.new(0.0705073774, 0, 0.271171719, 0)
re1.Size = UDim2.new(0.858350694, 0, 0.453797489, 0)
re1.Font = Enum.Font.Arcade
re1.Text = "Auto Respawn"
re1.TextColor3 = Color3.fromRGB(255, 255, 255)
re1.TextScaled = true
re1.TextSize = 14.000
re1.TextStrokeTransparency = 0.000
re1.TextWrapped = true

-- Scripts Auto Respawn:
local SavedPositions = {AutoRe = nil; Crimpad = nil;}
local Connections = {Died = nil;}
local Camera = game:FindService("Workspace").CurrentCamera
local Rservice = game:GetService("RunService")
local Hbeat = Rservice.Heartbeat
local Rstep = Rservice.RenderStepped
local Stepped = Rservice.Stepped
local LocalPlayer = game.Players.localPlayer
local Teams = game.Teams
local waitfor
local screengui
local team

local LocTP = function(cframe)
	LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame = cframe
end

function SaveCamPos()
	SavedPositions.OldCameraPos = Camera.CFrame
end
function LoadCamPos()
	Rstep:Wait()
	Camera.CFrame = SavedPositions.OldCameraPos or Camera.CFrame
end

function ChangeTeam(args)
  game.ReplicatedStorage.RemoteEvent:FireServer("ChangeTeam", Teams:FindFirstChild(args))
end

function TeamTo(args)
  local tmp = LocalPlayer.Character.HumanoidRootPart.CFrame; SavedPositions.AutoRe = tmp; SaveCamPos()
  ChangeTeam("Neutral")
  if args == "criminal" then
    ChangeTeam("Criminals")
  elseif args == "inmate" then
    ChangeTeam("Prisoners")
  elseif args == "guard" then
    ChangeTeam("Police")
  end; LocalPlayer.CharacterAdded:Wait()
		if waitfor(LocalPlayer.Character, "HumanoidRootPart", 4) then
			LocTP(tmp)
		end; LoadCamPos()
end

function Draggable(frame)
    local script = Instance.new('Script', frame)

	local UserInputService = game:GetService("UserInputService")
	
	local gui = script.Parent
	
	local dragging
	local dragInput
	local dragStart
	local startPos
	
	local function update(input)
		local delta = input.Position - dragStart
		gui.Position = gui:TweenPosition(UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y), 'Out', 'Linear', 0.09, true); -- drag speed
	end
	
	gui.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = gui.Position
	
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	
	gui.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)
	
	UserInputService.InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			update(input)
		end
	end)
end
Draggable(Main)

waitfor = function(source, args, interval)
	local int = interval or 5
	local timeout = tick() + int
	repeat Stepped:Wait() until source:FindFirstChild(args) or tick() - timeout >=0
	timeout = nil
	if source:FindFirstChild(args) then
		return source:FindFirstChild(args)
	else
		return nil
	end
end

SavedPositions.AutoRe = nil
Connections.Died = nil
local lochar = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local function ondiedevent()
	coroutine.wrap(function()
		Connections.Died:Disconnect(); SaveCamPos()
		SavedPositions.AutoRe = lochar:WaitForChild("HumanoidRootPart", 1) and LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame; Camera.CameraType = Enum.CameraType.Track
        if autoRespawn then
            local team = LocalPlayer.Team
            if team == Teams.Criminals then
                TeamTo("criminal")
            elseif team == Teams.Prisoners then
                TeamTo("inmate")
            elseif team == Teams.Police then
                TeamTo("guard")
            end
        end
	end)()
end
getfenv()["\112\114\105\110\116"]("\70\73\88\69\68\32\66\89\32\72\49\55\83\51") 
local function charaddtask()
	Connections.Died:Disconnect()
	local LHuman = lochar:WaitForChild("Humanoid", 1)
	if LHuman then
		Connections.Died = LHuman.Died:Connect(ondiedevent)
        if Connections.HeadChildAdded then 
               Connections.HeadChildAdded:Disconnect(); Connections.HeadChildAdded = nil
        end
	end
end
local function oncharadded()
	lochar = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	if SavedPositions.AutoRe and autoRespawn then
		local LRoot = lochar:WaitForChild("HumanoidRootPart", 1)
		if LRoot then
			LRoot.CFrame = SavedPositions.AutoRe; LoadCamPos(); LRoot.CFrame = SavedPositions.AutoRe
			task.spawn(function()
				for i = 1, 4 do
					task.wait(); LRoot.CFrame = SavedPositions.AutoRe
				end
			end)
		end
	end
	lochar:WaitForChild("Humanoid", 1):SetStateEnabled(Enum.HumanoidStateType.FallingDown, false)
	lochar:WaitForChild("Humanoid", 1):SetStateEnabled(Enum.HumanoidStateType.Ragdoll, false)
  coroutine.wrap(charaddtask)()
end
Connections.Died = lochar:WaitForChild("Humanoid").Died:Connect(ondiedevent)
Connections.CharacterAdded = LocalPlayer.CharacterAdded:Connect(oncharadded)

-- Button Script:

local function MKANE_fake_script() -- re2.LocalScript 
	local script = Instance.new('LocalScript', re2)

	script.Parent.MouseButton1Click:Connect(function()
		script.Parent.Visible = false
		script.Parent.Parent.re1.Visible = true
		autoRespawn = false
	end)
end
coroutine.wrap(MKANE_fake_script)()
local function ARECQSO_fake_script() -- re1.LocalScript 
	local script = Instance.new('LocalScript', re1)

	script.Parent.MouseButton1Click:Connect(function()
		script.Parent.Text = "Auto Respawn : Off"
		script.Parent.Visible = false
		script.Parent.Parent.re2.Visible = true
		autoRespawn = true
	end)
end
coroutine.wrap(ARECQSO_fake_script)()

screengui = Instance.new("ScreenGui",game.CoreGui)
team = Instance.new("Frame",screengui)
local team2 = Instance.new("Frame",team)
local label = Instance.new("TextLabel",team)
local button1 = Instance.new("TextButton",team2)
local button2 = Instance.new("TextButton",team2)
local button3 = Instance.new("TextButton",team2)
screengui.Name = "TeamMenu"
screengui.ResetOnSpawn = true
screengui.Enabled = true
screengui.ZIndexBehavior = "Sibling"
team.Name = "TeamFrame"
team.Active = false
team.AnchorPoint = Vector2.new(0.5, 0.5)
team.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
team.BorderColor3 = Color3.fromRGB(0, 0, 0)
team.BorderSizePixel = 0
team.Position = UDim2.new(0.5, 0, 0.88, 0)
team.Size = UDim2.new(0, 300, 0, 65)
team2.Name = "Teams"
team2.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
team2.Active = false
team2.BorderColor3 = Color3.fromRGB(0, 0, 0)
team2.BorderSizePixel = 0
team2.Position = UDim2.new(0, 0, 0.338, 0)
team2.Size = UDim2.new(0, 300, 0, 42)
button1.Name = "CriminalButton"
button1.Active = true
button1.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
button1.BorderColor3 = Color3.fromRGB(45, 45, 45)
button1.BorderMode = "Inset"
button1.BorderSizePixel = 3
button1.Position = UDim2.new(0, 0, 0.071, 0)
button1.Size = UDim2.new(0, 95, 0, 35)
button1.Font = Enum.Font.SourceSans
button1.Text = "CRIMINAL"
button1.TextColor3 = Color3.fromRGB(255, 255, 255)
button1.TextScaled = false
button1.TextSize = 21
button1.TextWrapped = true
button2.Name = "GuardButton"
button2.Active = true
button2.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
button2.BorderColor3 = Color3.fromRGB(45, 45, 45)
button2.BorderMode = "Inset"
button2.BorderSizePixel = 3
button2.Position = UDim2.new(0.683, 0, 0.071, 0)
button2.Size = UDim2.new(0, 95, 0, 35)
button2.Font = Enum.Font.SourceSans
button2.Text = "GUARD"
button2.TextColor3 = Color3.fromRGB(255, 255, 255)
button2.TextScaled = false
button2.TextSize = 21
button2.TextWrapped = true
button3.Name = "InmateButton"
button3.Active = true
button3.BackgroundColor3 = Color3.fromRGB(255, 85, 0)
button3.BorderColor3 = Color3.fromRGB(45, 45, 45)
button3.BorderMode = "Inset"
button3.BorderSizePixel = 3
button3.Position = UDim2.new(0.34, 0, 0.071, 0)
button3.Size = UDim2.new(0, 95, 0, 35)
button3.Font = Enum.Font.SourceSans
button3.Text = "INMATE"
button3.TextColor3 = Color3.fromRGB(255, 255, 255)
button3.TextScaled = false
button3.TextSize = 21
button3.TextWrapped = true
label.Name = "TeamLabel"
label.Active = false
label.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
label.BorderColor3 = Color3.fromRGB(0, 0, 0)
label.BorderSizePixel = 0
label.Size = UDim2.new(0, 300, 0, 22)
label.Font = Enum.Font.SourceSans
label.Text = "SELECT A TEAM"
label.TextColor3 = Color3.fromRGB(255, 255, 255)
label.TextScaled = false
label.TextSize = 20
label.TextWrapped = false

button1.MouseButton1Click:Connect(function()
	TeamTo("criminal")
end);button2.MouseButton1Click:Connect(function()
    TeamTo("guard")
end);button3.MouseButton1Click:Connect(function()
    TeamTo("inmate")
end)
Draggable(team)
